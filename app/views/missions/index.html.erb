<form>
  <h4>mission検索</h4>
  <div class="mb-3">
    <%= search_form_for @q do |f| %>
      <div class="input-group mb-3">
        <div class="form-outline">
        <%= f.search_field :input_main_cont, placeholder: "キーワード検索", class: "form-control" %>
        </div>
      </div>
      <label class="form-label">
        <%= f.label :tag_name, "タグ検索" %>
      </label>
      <div class= "form-check mb-3">
        <%= f.collection_check_boxes :tags_id_in, @tags, :id, :tag_name, :include_blank => '指定なし', class: "form-check-input", id: "check1" %>
      </div>
      <button type="button" class="btn btn-primary">
        <%= f.submit '検索' %>
        <i class="fas fa-search"></i>
      </button>
        <%= sort_link(@q, :updated_at, "更新順" ) %>
    <% end %>
  </div>

  <div class="content-wrapper">
    <div class="content-block">
      <% @missions.each do |mission| %>
      <div class="content">
        <div class="user-about">
          <% if mission.user.image.attached? %>
            <div class="user-image">
              <%= image_tag mission.user.image %>
            </div>
          <% else %>
            <div class="user-image">
              <%= image_tag "kkrn_icon_user_3" %>
            </div>
          <% end %>
          <div class="user-profile">
            <div class="user-name">
              <th> 投稿者 ：</th>
              <th><%= mission.user.user_name %></th>
            </div>
          </div>
        </div>

        <tr class="mission-main">
          <th> メソッド名   ：</th>
          <th><%= link_to mission.input_main, mission_path(mission) %></th>
        </tr>
        <div class="mission-reading">
          <th> コンテンツ ：</th>
          <th><%= mission.input_reading %></th>
        </div>

        <p class="card-text">
          <% mission.tags.each do |tag| %>
            <span class="badge rounded-pill bg-primary"><%= tag.tag_name %></span>
          <% end %><br>
          <small class="text-muted">更新日：<%= mission.updated_at.strftime("%Y-%m-%d") %></small>
        </p>
      </div>
    <% end %>
  </div>
</form>

<%= paginate @missions %>